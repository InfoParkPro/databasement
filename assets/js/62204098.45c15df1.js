"use strict";(globalThis.webpackChunkdatabasement_docs=globalThis.webpackChunkdatabasement_docs||[]).push([[170],{5667:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>d,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"user-guide/volumes","title":"Storage Volumes","description":"Storage volumes are the destinations where your backup files are stored. Databasement supports multiple storage backends to fit your infrastructure needs.","source":"@site/docs/user-guide/volumes.md","sourceDirName":"user-guide","slug":"/user-guide/volumes","permalink":"/databasement/user-guide/volumes","draft":false,"unlisted":false,"editUrl":"https://github.com/David-Crty/databasement/tree/main/docs/docs/user-guide/volumes.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"userGuideSidebar","previous":{"title":"Snapshots","permalink":"/databasement/user-guide/snapshots"},"next":{"title":"Permissions","permalink":"/databasement/user-guide/permissions"}}');var r=t(4848),i=t(8453);const d={sidebar_position:5},o="Storage Volumes",l={},c=[{value:"Volume Types",id:"volume-types",level:2},{value:"Local Storage",id:"local-storage",level:3},{value:"S3 Storage",id:"s3-storage",level:3},{value:"SFTP Storage",id:"sftp-storage",level:3},{value:"FTP Storage",id:"ftp-storage",level:3},{value:"Connection Testing",id:"connection-testing",level:2},{value:"Volume Immutability",id:"volume-immutability",level:2}];function a(e){const s={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"storage-volumes",children:"Storage Volumes"})}),"\n",(0,r.jsx)(s.p,{children:"Storage volumes are the destinations where your backup files are stored. Databasement supports multiple storage backends to fit your infrastructure needs."}),"\n",(0,r.jsx)(s.h2,{id:"volume-types",children:"Volume Types"}),"\n",(0,r.jsx)(s.h3,{id:"local-storage",children:"Local Storage"}),"\n",(0,r.jsx)(s.p,{children:"Local volumes store backups on the filesystem where Databasement is running. This is the simplest option for single-server setups."}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Field"}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsx)(s.tbody,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Path"})}),(0,r.jsx)(s.td,{children:"Absolute path to the backup directory"})]})})]}),"\n",(0,r.jsxs)(s.admonition,{type:"info",children:[(0,r.jsx)(s.p,{children:"Ensure the Databasement container has write access to the specified path. You may need to mount a volume when running Docker:"}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"docker run -v /path/on/host:/backups davidcrty/databasement\n"})})]}),"\n",(0,r.jsx)(s.h3,{id:"s3-storage",children:"S3 Storage"}),"\n",(0,r.jsx)(s.p,{children:"S3 volumes store backups in AWS S3 or any S3-compatible object storage (MinIO, DigitalOcean Spaces, Backblaze B2, etc.). All credentials and settings are configured per-volume."}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Field"}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Bucket"})}),(0,r.jsx)(s.td,{children:"S3 bucket name"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Prefix"})}),(0,r.jsxs)(s.td,{children:["Optional path prefix within the bucket (e.g., ",(0,r.jsx)(s.code,{children:"backups/production/"}),")"]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Region"})}),(0,r.jsxs)(s.td,{children:["AWS region where the bucket is located (e.g., ",(0,r.jsx)(s.code,{children:"us-east-1"}),")"]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Access Key ID"})}),(0,r.jsx)(s.td,{children:"AWS access key (optional \u2014 see below)"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Secret Access Key"})}),(0,r.jsx)(s.td,{children:"AWS secret key (optional \u2014 see below)"})]})]})]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Advanced settings"})," (expand in the form):"]}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Field"}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Custom Endpoint"})}),(0,r.jsx)(s.td,{children:"For S3-compatible storage (MinIO, DigitalOcean Spaces, etc.)"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Public Endpoint"})}),(0,r.jsx)(s.td,{children:"Public URL for presigned download links when the internal endpoint differs"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Use Path-Style Endpoint"})}),(0,r.jsx)(s.td,{children:"Required for most S3-compatible providers (MinIO, etc.)"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"IAM Role ARN"})}),(0,r.jsx)(s.td,{children:"Assume this IAM role via STS before accessing S3"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Role Session Name"})}),(0,r.jsxs)(s.td,{children:["Identifier for the assumed role session (default: ",(0,r.jsx)(s.code,{children:"databasement"}),")"]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"STS Endpoint"})}),(0,r.jsx)(s.td,{children:"Custom STS endpoint for role assumption"})]})]})]}),"\n",(0,r.jsx)(s.admonition,{type:"tip",children:(0,r.jsx)(s.p,{children:"Credentials are optional. When left blank, the AWS SDK uses its default credential chain: environment variables, EC2/ECS instance roles, and EKS IRSA. This allows deployments on AWS infrastructure to work without explicit keys."})}),"\n",(0,r.jsx)(s.admonition,{type:"tip",children:(0,r.jsx)(s.p,{children:"The secret access key is encrypted at rest in the database using Laravel's encryption. It is never stored in plain text."})}),"\n",(0,r.jsx)(s.h3,{id:"sftp-storage",children:"SFTP Storage"}),"\n",(0,r.jsx)(s.p,{children:"SFTP volumes store backups on a remote server via SSH File Transfer Protocol. This is ideal for storing backups on a dedicated backup server or NAS."}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Field"}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Host"})}),(0,r.jsx)(s.td,{children:"SFTP server hostname or IP address"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Port"})}),(0,r.jsx)(s.td,{children:"SSH port (default: 22)"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Username"})}),(0,r.jsx)(s.td,{children:"SSH username"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Password"})}),(0,r.jsx)(s.td,{children:"SSH password"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Root Directory"})}),(0,r.jsxs)(s.td,{children:["Base path on the remote server (e.g., ",(0,r.jsx)(s.code,{children:"/backups"}),")"]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Connection Timeout"})}),(0,r.jsx)(s.td,{children:"Timeout in seconds (default: 10)"})]})]})]}),"\n",(0,r.jsx)(s.admonition,{type:"note",children:(0,r.jsx)(s.p,{children:"Only password authentication is currently supported. SSH key authentication is planned for a future release."})}),"\n",(0,r.jsx)(s.admonition,{type:"tip",children:(0,r.jsx)(s.p,{children:"The password is encrypted at rest in the database using Laravel's encryption. It is never stored in plain text."})}),"\n",(0,r.jsx)(s.h3,{id:"ftp-storage",children:"FTP Storage"}),"\n",(0,r.jsx)(s.p,{children:"FTP volumes store backups on a remote FTP server. Both standard FTP and FTPS (FTP over SSL/TLS) are supported."}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Field"}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Host"})}),(0,r.jsx)(s.td,{children:"FTP server hostname or IP address"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Port"})}),(0,r.jsx)(s.td,{children:"FTP port (default: 21)"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Username"})}),(0,r.jsx)(s.td,{children:"FTP username"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Password"})}),(0,r.jsx)(s.td,{children:"FTP password"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Root Directory"})}),(0,r.jsxs)(s.td,{children:["Base path on the remote server (e.g., ",(0,r.jsx)(s.code,{children:"/backups"}),")"]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Enable SSL"})}),(0,r.jsx)(s.td,{children:"Use FTPS (FTP over SSL/TLS) for encrypted transfers"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Passive Mode"})}),(0,r.jsx)(s.td,{children:"Use passive mode for data connections (recommended for most setups)"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Connection Timeout"})}),(0,r.jsx)(s.td,{children:"Timeout in seconds (default: 90)"})]})]})]}),"\n",(0,r.jsx)(s.admonition,{type:"warning",children:(0,r.jsx)(s.p,{children:"Standard FTP transmits credentials and data in plain text. Enable SSL for secure transfers, or prefer SFTP for better security."})}),"\n",(0,r.jsx)(s.admonition,{type:"tip",children:(0,r.jsx)(s.p,{children:"The password is encrypted at rest in the database using Laravel's encryption. It is never stored in plain text."})}),"\n",(0,r.jsx)(s.h2,{id:"connection-testing",children:"Connection Testing"}),"\n",(0,r.jsxs)(s.p,{children:["Before saving a volume, use the ",(0,r.jsx)(s.strong,{children:"Test Connection"})," button to verify:"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"The storage location is accessible"}),"\n",(0,r.jsx)(s.li,{children:"Write permissions are configured correctly"}),"\n",(0,r.jsx)(s.li,{children:"Credentials are valid (for S3/SFTP/FTP)"}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"The test creates a small temporary file, reads it back to verify integrity, then deletes it."}),"\n",(0,r.jsx)(s.h2,{id:"volume-immutability",children:"Volume Immutability"}),"\n",(0,r.jsx)(s.p,{children:"Once a volume has backup snapshots associated with it, the storage configuration becomes read-only. This protects backup integrity by ensuring snapshots always point to their original storage location."}),"\n",(0,r.jsx)(s.p,{children:"You can still rename the volume, but the storage type and configuration cannot be changed. To use different storage settings, create a new volume."})]})}function h(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453:(e,s,t)=>{t.d(s,{R:()=>d,x:()=>o});var n=t(6540);const r={},i=n.createContext(r);function d(e){const s=n.useContext(i);return n.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),n.createElement(i.Provider,{value:s},e.children)}}}]);